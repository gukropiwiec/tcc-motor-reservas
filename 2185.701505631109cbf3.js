"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2185],{2185:(S,h,s)=>{s.r(h),s.d(h,{QuartosPageModule:()=>D});var u=s(9808),d=s(4182),i=s(5649),g=s(9800),l=s(655),p=s(162),m=s(2993),_=s(5439),f=s(2340),t=s(2096),Z=s(6858),x=s(3071),T=s(4662);function v(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-datetime",22,23),t.NdJ("ionChange",function(){t.CHM(e);const r=t.MAs(1);return t.oxw().formatCheckInDate(r.value)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("min",e.today)("showDefaultButtons",!0)}}function q(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-datetime",24,25),t.NdJ("ionChange",function(){t.CHM(e);const r=t.MAs(1);return t.oxw().formatCheckOutDate(r.value)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("min",e.today)("showDefaultButtons",!0)}}function y(o,a){1&o&&(t.TgZ(0,"ion-row")(1,"ion-col")(2,"div",26)(3,"span")(4,"b"),t._uU(5,"Nenhum quarto encontrado com essas configura\xe7\xf5es."),t.qZA()()()()())}function k(o,a){if(1&o&&(t.TgZ(0,"ion-row",42)(1,"ion-col"),t._UZ(2,"img",31),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.s9C("src",e.url,t.LSH)}}function C(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Fotos do Quarto"),t.qZA(),t.TgZ(4,"ion-buttons",39)(5,"ion-button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).setModalImagesOpen(!1)}),t._uU(6,"Fechar"),t.qZA()()()(),t.TgZ(7,"ion-content"),t.YNc(8,k,3,1,"ion-row",41),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(8),t.Q6J("ngForOf",e.imagesToShow)}}function A(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.busca?"Reservar":"Selecione uma data para reservar"," ")}}function M(o,a){1&o&&t._UZ(0,"ion-spinner",43)}function Q(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-row",28)(1,"ion-col",29)(2,"div",30),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(2).setModalImagesOpen(!0,c.images)}),t._UZ(3,"img",31),t.qZA(),t.TgZ(4,"ion-modal",32),t.YNc(5,C,9,1,"ng-template"),t.qZA()(),t.TgZ(6,"ion-col")(7,"div",33)(8,"ion-row")(9,"ion-col")(10,"h4"),t._uU(11),t.qZA()(),t.TgZ(12,"ion-col")(13,"ion-button",34),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(2).reservar(c.id)}),t.YNc(14,A,2,1,"span",20),t.YNc(15,M,1,0,"ion-spinner",35),t.qZA()()(),t.TgZ(16,"ion-row")(17,"ion-col"),t._UZ(18,"ion-icon",36),t._uU(19),t.TgZ(20,"span",37)(21,"span",38),t._uU(22),t.qZA(),t.TgZ(23,"small"),t._uU(24),t.qZA()(),t._UZ(25,"br"),t._uU(26),t.qZA()()()()()}if(2&o){const e=a.$implicit,n=t.oxw(2);t.xp6(3),t.s9C("src",null==e.images[0]?null:e.images[0].url,t.LSH),t.xp6(1),t.Q6J("isOpen",n.isModalImagesOpen)("backdropDismiss",!1),t.xp6(7),t.Oqu(e.name),t.xp6(2),t.Q6J("disabled",!n.busca),t.xp6(1),t.Q6J("ngIf",!n.loadingReserva),t.xp6(1),t.Q6J("ngIf",n.loadingReserva),t.xp6(4),t.hij(" Acomoda ",e.capacity," pessoas. "),t.xp6(3),t.hij("R$ ",e.totalPrice,""),t.xp6(2),t.hij("(R$ ",null==e.tariffs[0]?null:e.tariffs[0].price," por noite)"),t.xp6(2),t.hij(" ",e.description," ")}}function O(o,a){if(1&o&&(t.TgZ(0,"ion-grid"),t.YNc(1,Q,27,11,"ion-row",27),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.quartos)}}function P(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Realizar Reserva"),t.qZA(),t.TgZ(4,"ion-buttons",39)(5,"ion-button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().setModalOpen(!1)}),t._uU(6,"Fechar"),t.qZA()()()(),t.TgZ(7,"ion-content",44)(8,"div",45),t._UZ(9,"div",46)(10,"br"),t._uU(11," OU "),t._UZ(12,"br"),t.TgZ(13,"ion-button")(14,"a",47),t._uU(15,"Abrir link Mercado Pago"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(14),t.Q6J("href",e.preferenceUrl,t.LSH)}}const b=[{path:"",component:(()=>{class o{constructor(e,n,r,c){this.httpS=e,this.toastController=n,this.router=r,this.userS=c,this.quartos=[],this.today=_().format("YYYY-MM-DD"),this.checkInDate=null,this.checkInDateShow="-",this.checkOutDate=null,this.checkOutDateShow="-",this.qtyAdults="1",this.qtyChildren="0",this.busca=!1,this.isModalOpen=!1,this.isModalImagesOpen=!1,this.preferenceUrl=null,this.imagesToShow=[],this.loadingReserva=!1}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){})}ionViewWillEnter(){return(0,l.mG)(this,void 0,void 0,function*(){const e=history.state;delete e.navigationId,Object.keys(e).length>1?(this.formBusca=e,this.formatCheckInDate(e.checkInDate),this.formatCheckOutDate(e.checkOutDate),this.qtyAdults=e.qtyAdults.toString(),this.qtyChildren=e.qtyChildren.toString(),this.quartos=yield this.httpS.post("room/available",e),this.busca=!0):(this.quartos=yield this.httpS.get("room"),this.busca=!1)})}formatCheckOutDate(e){this.checkOutDateShow=this.formatDate(e),this.checkOutDate=this.formatDate(e,"yyyy-MM-dd")}formatCheckInDate(e){this.checkInDateShow=this.formatDate(e),this.checkInDate=this.formatDate(e,"yyyy-MM-dd")}buscarQuartos(){return(0,l.mG)(this,void 0,void 0,function*(){const e=document.getElementById("qtyAdultsEl").value,n=document.getElementById("qtyChildrenEl").value;e&&n&&this.checkInDate&&this.checkOutDate?(this.formBusca={checkInDate:this.checkInDate,checkOutDate:this.checkOutDate,qtyAdults:Number(e),qtyChildren:Number(n)},this.quartos=yield this.httpS.post("room/available",this.formBusca),this.busca=!0):this.presentToast("Por favor, preencha todos os campos para pesquisar um quarto.","danger")})}reservar(e){return(0,l.mG)(this,void 0,void 0,function*(){if(!this.userS.token||!this.userS.userInfo)return void this.presentToast("Favor fazer o login para realizar uma reserva.","primary");if(this.formBusca.roomId=e,!this.formBusca.checkInDate||!this.formBusca.checkOutDate)return void this.presentToast("Um erro ocorreu ao tentar reservar o quarto. Por favor, refa\xe7a a pesquisa novamente para reservar um quarto.","danger");this.loadingReserva=!0;const n=yield this.httpS.post("booking",this.formBusca);this.preferenceUrl=n.preference_url,new MercadoPago(f.N.mercadoPagoPublicKey,{locale:"en-US"}).checkout({preference:{id:n.preference_id},autoOpen:!0}).render({container:".mp-container",label:"Realizar Pagamento"}),this.setModalOpen(!0),this.loadingReserva=!1})}openDetalhes(e){this.router.navigateByUrl(`/detalhes-quarto/${e}`)}limparFiltros(){return(0,l.mG)(this,void 0,void 0,function*(){this.formBusca.checkInDate=null,this.formBusca.checkOutDate=null,this.formBusca.qtyAdults=null,this.formBusca.qtyChildren=null,this.checkInDate=null,this.checkInDateShow="-",this.checkOutDate=null,this.checkOutDateShow="-",this.qtyAdults="1",this.qtyChildren="0",this.busca=!1,this.quartos=yield this.httpS.get("room")})}setModalOpen(e){e||window.location.reload(),this.isModalOpen=e}setModalImagesOpen(e,n=[]){this.isModalImagesOpen=e,this.imagesToShow=n}formatDate(e,n="dd/MM/yyyy"){return(0,p.Z)((0,m.Z)(e),n)}presentToast(e,n){return(0,l.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:e,duration:3e3,color:n})).present()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.O),t.Y36(i.yF),t.Y36(g.F0),t.Y36(x.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-quartos"]],viewQuery:function(e,n){if(1&e&&t.Gf(i.x4,7),2&e){let r;t.iGM(r=t.CRH())&&(n.datetime=r.first)}},decls:72,vars:10,consts:[[3,"fullscreen"],[1,"container","mt-3"],["button","true","id","open-date-input","lines","none",1,"input-card"],["slot","start","icon","calendar-clear-outline"],["slot","end",1,"text-center"],["trigger","open-date-input","show-backdrop","false"],["button","true","id","checkoutInput","lines","none",1,"input-card"],["trigger","checkoutInput","show-backdrop","false"],["id","open-date-input2","lines","none",1,"input-card"],["id","qtyAdultsEl",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["id","qtyChildrenEl",3,"ngModel","ngModelChange"],["value","0"],["color","danger","expand","block",3,"click"],["color","primary","expand","block",3,"disabled","click"],[4,"ngIf"],["trigger","trigger-modal",2,"--max-height","80vh",3,"isOpen","backdropDismiss"],["presentation","date","max","2023-12-31","doneText","Confirmar","cancelText","Cancelar","id","checkinElement",3,"min","showDefaultButtons","ionChange"],["popoverDatetime1",""],["presentation","date","doneText","Confirmar","cancelText","Cancelar","max","2023-12-31","id","checkoutElement",3,"min","showDefaultButtons","ionChange"],["popoverDatetime2",""],[1,"d-flex","align-items-center","justify-content-center",2,"min-height","80vh","font-size","1.5rem"],["class","my-5",4,"ngFor","ngForOf"],[1,"my-5"],["sizeXl","4","size","12"],[1,"img-quarto","text-center","cursor-pointer",3,"click"],[3,"src"],[3,"isOpen","backdropDismiss"],[1,"card-info","ion-padding"],["color","danger",1,"float-end","btn-reservar",3,"disabled","click"],["color","light","name","dots",4,"ngIf"],["color","danger","icon","people"],[1,"float-end"],[1,"price"],["slot","end"],[3,"click"],["class","img-wrapper",4,"ngFor","ngForOf"],[1,"img-wrapper"],["color","light","name","dots"],[1,"background-modal"],[1,"p-5"],[1,"mp-container"],["target","_blank",1,"text-decoration-none","text-white",3,"href"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-content",0)(1,"div",1)(2,"ion-card")(3,"ion-card-content")(4,"ion-row")(5,"ion-col")(6,"ion-item",2)(7,"ion-label"),t._UZ(8,"ion-icon",3),t._uU(9," Check-in"),t.qZA(),t.TgZ(10,"ion-text",4),t._uU(11),t.qZA(),t.TgZ(12,"ion-popover",5),t.YNc(13,v,2,2,"ng-template"),t.qZA()()(),t.TgZ(14,"ion-col")(15,"ion-item",6)(16,"ion-label"),t._UZ(17,"ion-icon",3),t._uU(18," Check-out"),t.qZA(),t.TgZ(19,"ion-text",4),t._uU(20),t.qZA(),t.TgZ(21,"ion-popover",7),t.YNc(22,q,2,2,"ng-template"),t.qZA()()(),t.TgZ(23,"ion-col")(24,"ion-item",8)(25,"ion-label"),t._UZ(26,"ion-icon",3),t._uU(27," Adultos"),t.qZA(),t.TgZ(28,"ion-select",9),t.NdJ("ngModelChange",function(c){return n.qtyAdults=c}),t.TgZ(29,"ion-select-option",10),t._uU(30,"1"),t.qZA(),t.TgZ(31,"ion-select-option",11),t._uU(32,"2"),t.qZA(),t.TgZ(33,"ion-select-option",12),t._uU(34,"3"),t.qZA(),t.TgZ(35,"ion-select-option",13),t._uU(36,"4"),t.qZA(),t.TgZ(37,"ion-select-option",14),t._uU(38,"5"),t.qZA(),t.TgZ(39,"ion-select-option",15),t._uU(40,"6"),t.qZA()()()(),t.TgZ(41,"ion-col")(42,"ion-item",8)(43,"ion-label"),t._UZ(44,"ion-icon",3),t._uU(45," Crian\xe7as"),t.qZA(),t.TgZ(46,"ion-select",16),t.NdJ("ngModelChange",function(c){return n.qtyChildren=c}),t.TgZ(47,"ion-select-option",17),t._uU(48,"0"),t.qZA(),t.TgZ(49,"ion-select-option",10),t._uU(50,"1"),t.qZA(),t.TgZ(51,"ion-select-option",11),t._uU(52,"2"),t.qZA(),t.TgZ(53,"ion-select-option",12),t._uU(54,"3"),t.qZA(),t.TgZ(55,"ion-select-option",13),t._uU(56,"4"),t.qZA(),t.TgZ(57,"ion-select-option",14),t._uU(58,"5"),t.qZA(),t.TgZ(59,"ion-select-option",15),t._uU(60,"6"),t.qZA()()()(),t.TgZ(61,"ion-col")(62,"ion-button",18),t.NdJ("click",function(){return n.buscarQuartos()}),t._uU(63,"Pesquisar"),t.qZA()(),t.TgZ(64,"ion-col")(65,"ion-button",19),t.NdJ("click",function(){return n.limparFiltros()}),t._uU(66,"Limpar Filtros"),t.qZA()()()()(),t.YNc(67,y,6,0,"ion-row",20),t.YNc(68,O,2,1,"ion-grid",20),t.TgZ(69,"ion-modal",21),t.YNc(70,P,16,1,"ng-template"),t.qZA()(),t._UZ(71,"app-footer"),t.qZA()),2&e&&(t.Q6J("fullscreen",!0),t.xp6(11),t.Oqu(n.checkInDateShow),t.xp6(9),t.Oqu(n.checkOutDateShow),t.xp6(8),t.Q6J("ngModel",n.qtyAdults),t.xp6(18),t.Q6J("ngModel",n.qtyChildren),t.xp6(19),t.Q6J("disabled",!n.busca),t.xp6(2),t.Q6J("ngIf",0===n.quartos.length),t.xp6(1),t.Q6J("ngIf",n.quartos.length>0),t.xp6(1),t.Q6J("isOpen",n.isModalOpen)("backdropDismiss",!1))},directives:[i.W2,i.PM,i.FN,i.Nd,i.wI,i.Ie,i.Q$,i.gu,i.yW,i.d8,i.x4,i.QI,i.t9,d.JJ,d.On,i.n0,i.YG,u.O5,i.jY,u.sg,i.ki,i.Gu,i.sr,i.wd,i.Sm,i.PQ,T.c],styles:[".card-info[_ngcontent-%COMP%]{background-color:#f0f0f5;border-radius:5px;min-height:279px}.card-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#e02041;font-weight:700}.card-info[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.5rem}.card-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.img-quarto[_ngcontent-%COMP%]{border-radius:5px;max-width:400px}.btn-reservar[_ngcontent-%COMP%]{--border-radius: 20px;font-weight:700}"]}),o})()}];let U=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.Bz.forChild(b)],g.Bz]}),o})();var w=s(5642);let D=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,d.u5,i.Pc,U,w.K]]}),o})()}}]);